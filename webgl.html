<?DOCTYPE html?>
<!-- Basic WebGL demo - Mandelbrot -->
<html>
<head>
    <script type="text/x-shader" id="vertex-shader-src">
    precision mediump float;

    uniform float aspect;

    attribute vec2 vertexPosition;
    varying vec2 fragmentPosition;

    void main() {
        // convert the 2d position to a 4d vector
        gl_Position = vec4(vertexPosition, 0, 1);
        // interpolate coords over the whole screen, scaled by aspect ratio
        fragmentPosition = vec2(vertexPosition.x * aspect, vertexPosition.y);
    }
    </script>
    <script type="text/x-shader" id="fragment-shader-src">
    precision mediump float;

    uniform float time;

    varying vec2 fragmentPosition;

    const vec4 BLACK = vec4(51, 51, 41, 255) / 255.;
    const vec4 WHITE = vec4(255, 255, 240, 255) / 255.;

    const float PI = 3.1415926535898;
    const float EDGE = 0.01;

    void main() {
        float dist = distance(fragmentPosition, vec2(0, 0));
        float angle = atan(fragmentPosition.x, fragmentPosition.y) + PI;
        // Why is .159 magic?
        float d = mod(dist * 5. + angle * .159 - 3. * time / PI, 1.);

        // Anti-aliasing nonsense.
        if (d < EDGE) {
            gl_FragColor = mix(WHITE, BLACK, (d + EDGE) * 10.);
        } else if (d > 1. - EDGE) {
            gl_FragColor = mix(WHITE, BLACK, (d - 1. + EDGE) * 10.);
        } else if (d > .5 - EDGE && d < .5 + EDGE) {
            gl_FragColor = mix(BLACK, WHITE, (d - .5 + EDGE) * 10.);
        } else if (d <= .5 - EDGE) {
            gl_FragColor = BLACK;
        } else if (d >= .5 + EDGE) {
            gl_FragColor = WHITE;
        }
    }
    </script>
    <script src="jquery-2.1.4.js"></script>
    <script src="webgl.js"></script>
</head>
<body>
    <canvas width="1024" height="720"></canvas>
</body>
</html>
