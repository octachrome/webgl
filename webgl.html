<?DOCTYPE html?>
<html>
<head>
    <script type="text/x-shader" id="vertex-shader-src">
    precision mediump float;
    attribute vec2 vertexPosition;
    attribute vec3 vertexColour;
    varying vec3 fragmentColour;
    uniform int mode;

    void main() {
        gl_Position = vec4(vertexPosition, 0, 1);
        if (mode == 1) {
            gl_PointSize = 50.0;
            fragmentColour = vertexColour;
        }
    }
    </script>
    <script type="text/x-shader" id="fragment-shader-src">
    precision mediump float;
    varying vec3 fragmentColour;
    uniform int mode;

    void main() {
        if (mode == 0) {
            gl_FragColor = vec4(1., 0., 0., 1.);
        }
        else {
            float scale = max(0.0, 1.0 - 2.0 * length(vec2(gl_PointCoord[0] - 0.5, gl_PointCoord[1] - 0.5)));
            gl_FragColor = vec4(fragmentColour * scale, scale);
        }
    }
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="webgl.js"></script>
</head>
<body>
    <canvas width="800" height="600"></canvas>
</body>
</html>
